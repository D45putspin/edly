<html>

<head>
    <script src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
    <meta charset="utf-8">
    <script src="notify.min.js"></script>
</head>

<body onload>
    <form style="display:block">
        <input type="text" placeholder="email" name="email" id="email">
        <input type="password" name="password" id="password">
        <input type="button" id="enter" value="enter">
        <a id="element"> </a>
        
    </form>
    <script type="text/javascript">
     
        $('#enter').click(function () {
            let x = password.value;
            let y = email.value;
            console.log(y, x);
            $.ajax({
                url: 'http://localhost:3000/user/login',
                type: 'POST',
                cache: false,
                data: { email: y, password: x },
                success: function (data) {
                    $('#element').text(data.message);
                    document.cookie = "token = " + data.message + ";secure";
                    window.location.href = "../edly/index.html";

                }
                , error: function ( jqXHR, textStatus, err) {
                    var error= jQuery.parseJSON(jqXHR.responseText);
                    console.log(error.message);
                    console.log(textStatus);
                    console.log(err);
                    notiferror(error.message);
                 
                   
                
                
                }
            })
        });
             function notiferror(error){
                switch (error){
                        case "need_activation":
                            $.notify("espere um administrador aceitar a sua conta","error");
                            break;
                        case "wrong_fields":
                            $.notify("campos errados!","error");
                            break;
                        case "not_found":
                            $.notify("conta não encontrada, verifique se o email está correto!","error")
                    }
             }


       
    </script>
    
</body>